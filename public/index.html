<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>PC Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>PC Information</h1>

  <!-- üî∑ „Çø„Éñ -->
  <div class="tabs">
    <button class="tab active" onclick="showTab('operation')">Operation</button>
    <button class="tab" onclick="showTab('scheduler')">Scheduler</button>
    <button class="tab" onclick="showTab('load')">Load Average</button>
    <button class="tab" onclick="showTab('cpu')">CPU</button>
    <button class="tab" onclick="showTab('memory')">Memory</button>
    <button class="tab" onclick="showTab('gpu')">GPU</button>
    <button class="tab" onclick="showTab('network')">Network</button>
    <button class="tab" onclick="showTab('speed')">Network Speed</button>
    <button class="tab" onclick="showTab('agents')">Agents</button>
    <button class="tab" onclick="showTab('myPC')">My PC</button>
  </div>

  <!-- üî∂   Êìç‰ΩúË°®Á§∫ -->
  <div id="operation" class="tab-content active">
    <div class="dashboard" id="dashboard-operation">
      <div><strong>Server IP Address:</strong><p id="server-ip"></p></div>
      <div>
        <input id="command-input" type="text" placeholder="„Ç≥„Éû„É≥„Éâ„ÇíÂÖ•Âäõ">
        <button onclick="sendCommand(document.getElementById('command-input').value)">run</button>
      </div> 
    </div>
  </div>
  
  <!-- üî∂   „Çπ„Ç±„Ç∏„É•„Éº„É©Êìç‰ΩúË°®Á§∫ -->
  <div id="scheduler" class="tab-content">
    <div>
      <label>Scheduler Strategy:</label>
      <select id="strategy-select">
        <option value="LoadAverageStrategy">LoadAverageStrategy</option>
        <option value="Strategy2022">Scheduler2022</option>
		<option value="ScoreBasedStrategy">ScoreBasedStrategy</option>
		<option value="ScoreBasedStrategy2">ScoreBasedStrategy2</option>
      </select>
      <label>Update Interval (ms):</label>
      <input type="number" id="interval-input" value="1000">
      <label>Agent Observe Time</label>
      <input type="number" id="observe-input" value="3000">
      <label>Remigrate Prohibit Time</label>
      <input type="number" id="remigrate-input" value="3000">
      <label>Agent EMA Alpha</label>
      <input type="number" id="ema-input" value="0.1">
      <button onclick="applySchedulerConfig()">Apply</button>
    </div> 
  </div>
  
  <!-- üî∂ „É≠„Éº„Éâ„Ç¢„Éô„É¨„Éº„Ç∏Ë°®Á§∫ -->
  <div id="load" class="tab-content">
    <div class="dashboard" id="dashboard-load"></div>
  </div>

  <!-- üî∂ CPUÁä∂Ê≥ÅË°®Á§∫ -->
  <div id="cpu" class="tab-content">
    <div class="dashboard" id="dashboard-cpu"></div>
  </div>
  
  <!-- üî∂ „É°„É¢„É™Ë°®Á§∫„Ç®„É™„Ç¢ -->
  <div id="memory" class="tab-content">
    <div class="dashboard" id="dashboard-memory"></div>
  </div>
  
  <!-- üî∂ GPUÁä∂Ê≥ÅË°®Á§∫ -->
  <div id="gpu" class="tab-content">
    <div class="dashboard" id="dashboard-gpu"></div>
  </div>
  
  <!-- üî∂ „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØÁä∂Ê≥ÅË°®Á§∫ -->
  <div id="network" class="tab-content">
    <div class="dashboard" id="dashboard-network"></div>
  </div>
  
  <!-- üî∂ „Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Çπ„Éî„Éº„ÉâÁä∂Ê≥ÅË°®Á§∫ -->
  <div id="speed" class="tab-content">
    <div class="dashboard" id="dashboard-speed">
      <div class="card">
        <table class="network-speed-table">
          <thead>
            <tr>
              <th>ÈÄÅ‰ø°ÂÖÉ IP</th>
              <th>ÂÆõÂÖà IP</th>
              <th>„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÈÄüÂ∫¶ (Mbps)</th>
              <th>„ÉÄ„Ç¶„É≥„É≠„Éº„ÉâÈÄüÂ∫¶ (Mbps)</th>
            </tr>
          </thead>
          <tbody id="networkSpeedBody">
          </tbody>
        </table>
      </div>
    </div>
  </div>
    
  <!-- üî∂ AgentÊÉÖÂ†±Ë°®Á§∫ÔºàIPÂà•Ë°®Á§∫Ôºâ -->
  <div id="agents" class="tab-content">
    <div class="dashboard" id="dashboard-agents">
      <div class="agents-wrap">
        <div class="agents-header">
          <h3>Agents</h3>
          <div class="agents-filter">
            <label for="agents-ip-filter">IP „Éï„Ç£„É´„Çø:</label>
            <select id="agents-ip-filter">
              <option value="all">All</option>
            </select>
          </div>
        </div>

        <div class="agents-layout">
          <!-- Â∑¶Ôºö‰∏ÄË¶ß„ÉÜ„Éº„Éñ„É´ -->
          <div class="agents-table-wrap">
            <h4>Agent List</h4>
            <table id="agents-table">
              <thead>
                <tr>
                  <th>IP</th>
                  <th>Agent ID</th>
                  <th>Name</th>
                  <th>StartTime</th>
                </tr>
              </thead>
              <tbody id="agents-tbody"></tbody>
            </table>
          </div>

          <!-- Âè≥ÔºöIP „Åî„Å®„ÅÆ„Ç´„Éº„Éâ -->
          <div class="agents-by-ip-wrap">
            <h4>Agents by IP</h4>
            <div id="agents-by-ip"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- üî∂„ÄÄËá™ÂàÜ„ÅÆPCÁä∂Ê≥ÅË°®Á§∫ -->
  <div id="myPC" class="tab-content">
    <div class="dashboard" id="dashboard-myPC">
      <div class="TimeLineContainer" id="LoadAverageTimeLine"></div>
      <div class="TimeLineContainer" id="CPUTimeLine"></div>
      <div class="TimeLineContainer" id="MemoryTimeLine"></div>
      <div class="TimeLineContainer" id="GPUTimeLine"></div>
      <div class="TimeLineContainer" id="NetworkTimeLine"></div>
      <div class="TimeLineContainer" id="AgentTimeLine"></div>
    </div>
  </div>
    
  <style>
    .agents-wrap { font-family: system-ui, sans-serif; }
    #agents-table { width: 100%; border-collapse: collapse; }
    #agents-table th, #agents-table td {
      border: 1px solid #ddd; padding: 6px 8px; text-align: left; white-space: nowrap;
    }
    #agents-table thead th { background: #f6f8fa; position: sticky; top: 0; }
    #agents-table tbody tr:nth-child(even) { background: #fafafa; }
    .num { text-align: right; }

    /* Agents „É¨„Ç§„Ç¢„Ç¶„Éà */
    .agents-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    .agents-filter select {
      padding: 4px 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
      font-size: 0.9rem;
    }
    .agents-layout {
      display: flex;
      gap: 16px;
      align-items: flex-start;
    }
    .agents-table-wrap {
      flex: 2;
      min-width: 0;
      max-height: 400px;
      overflow: auto;
    }
    .agents-by-ip-wrap {
      flex: 3;
      min-width: 0;
      max-height: 400px;
      overflow: auto;
    }
    .agent-ip-card {
      border: 1px solid #e1e4e8;
      border-radius: 8px;
      padding: 8px 10px;
      margin-bottom: 8px;
      background: #ffffff;
      box-shadow: 0 1px 2px rgba(0,0,0,0.03);
    }
    .agent-ip-card-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 4px;
      font-size: 0.9rem;
    }
    .agent-ip-label {
      font-weight: 600;
      color: #555;
    }
    .agent-ip-value {
      font-family: monospace;
      margin-left: 4px;
    }
    .agent-ip-count {
      font-size: 0.75rem;
      color: #666;
    }
    .agent-ip-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
    }
    .agent-ip-table th, .agent-ip-table td {
      border: 1px solid #eee;
      padding: 4px 6px;
      white-space: nowrap;
    }
    .agent-ip-table thead th {
      background: #f6f8fa;
    }

    /* ‰æã: „Çø„Ç§„É†„É©„Ç§„É≥Áî®„É©„ÉÉ„Éë„Éº„Å´Âõ∫ÂÆöÈ´ò„Çí‰∏é„Åà„Çã */
    .timeline {
      height: 180px;   /* ÂøÖÈ†à: „Åì„Åì„ÅßÁ∏¶„Çµ„Ç§„Ç∫„ÇíÊ±∫„ÇÅ„Çã */
      margin: 8px 0;
    }
    .timeline > canvas {
      width: 100% !important;
      height: 100% !important;
    }
    /* „Çø„Ç§„É†„É©„Ç§„É≥ÂÖ®‰Ωì„ÅÆ‰ΩôÁôΩ„Å®È´ò„ÅïË™øÊï¥ */
    .chart-container {
      width: 100%;
      height: 280px;   /* ‚Üê ‚Üê È´ò„Åï„ÇíÂ¢ó„ÇÑ„ÅôÔºà200„Äú400px„Åå„Å°„Çá„ÅÜ„Å©ËâØ„ÅÑÔºâ */
      margin: 12px 0;
    }

    /* canvasËá™‰Ωì„ÇíË¶™„ÅÆ„Çµ„Ç§„Ç∫„ÅÑ„Å£„Å±„ÅÑ„Å´Â∫É„Åí„Çã */
    .chart-container > canvas {
      width: 100% !important;
      height: 100% !important;
    }

    /* GPU„Çø„Ç§„É†„É©„Ç§„É≥Â∞ÇÁî®ÔºàÁ∏¶„Å´‰∏¶„Åπ„Çã„Å™„Çâ‰ΩôÁôΩÂ§ö„ÇÅÔºâ */
    .gpu-chart {
      height: 260px;
      margin-top: 10px;
    }

    /* Network „ÉÜ„Éº„Éñ„É´ */
    .network-table-wrapper {
      overflow-x: auto;
    }
    .network-table {
      width: 100%;
      border-collapse: collapse;
    }
    .network-table th,
    .network-table td {
      border: 1px solid #ddd;
      padding: 4px 8px;
      white-space: nowrap;
    }
    .network-table thead th {
      background: #f6f8fa;
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <script src="main.js"></script>
</body>
</html>